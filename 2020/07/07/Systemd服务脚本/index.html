

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;dark&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png">
  <link rel="icon" type="image/png" href="/img/avatar.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#000000">
  <meta name="description" content="">
  <meta name="author" content="AcherStyx">
  <meta name="keywords" content="">
  <title>SystemdæœåŠ¡è„šæœ¬ - </title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/atom-one-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"acherstyx.github.io","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"#"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 50vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>AcherStyx</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                Links
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/bg_home.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="SystemdæœåŠ¡è„šæœ¬">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-07-07 02:13" pubdate>
        July 7, 2020 am
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.8k words
    </span>
  

  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> views
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SystemdæœåŠ¡è„šæœ¬</h1>
            
              <p class="note note-info">
                
                  æ›´æ–°äº7 months ago
                
              </p>
            
            <div class="markdown-body">
              <h2 id="åº"><a class="markdownIt-Anchor" href="#åº"></a> åº</h2>
<p>ç°åœ¨å¤§å¤šæ•°å‘è¡Œç‰ˆå·²ç»åˆ‡æ¢åˆ°äº†ä½¿ç”¨systemdè¿›è¡ŒæœåŠ¡ç®¡ç†ï¼ŒåŸæœ¬çš„serviceå·²ç»é€æ¸è¢«åºŸå¼ƒã€‚</p>
<p>è¿™æ¬¡æ¥æ•´ç†ä¸‹systemdä¸‹æœåŠ¡è„šæœ¬çš„å†™æ³•ã€‚</p>
<a id="more"></a>
<h2 id="è·¯å¾„"><a class="markdownIt-Anchor" href="#è·¯å¾„"></a> è·¯å¾„</h2>
<p>systemctlçš„è„šæœ¬å­˜å‚¨åœ¨ä»¥ä¸‹ä¸¤ä¸ªè·¯å¾„ä¸­ï¼š</p>
<ul>
<li>
<p><code>/usr/lib/systemd/system</code>ï¼š ç³»ç»ŸæœåŠ¡ï¼Œè¿è¡Œå…·æœ‰ç®¡ç†å‘˜æƒé™ã€‚</p>
</li>
<li>
<p><code>/usr/lib/systemd/user</code>ï¼šç”¨æˆ·æœåŠ¡ï¼Œåªæœ‰åœ¨ç”¨æˆ·ç™»é™†ä¹‹åæ‰å¼€å§‹è¿è¡Œã€‚</p>
</li>
</ul>
<p>ä¸€èˆ¬è‡ªå®šä¹‰çš„æœåŠ¡éƒ½ä»¥<code>*.service</code>ç»“å°¾ï¼Œå­˜æ”¾åœ¨<code>/usr/lib/systemd/system</code>ä¸­å³å¯ï¼Œå¦ä¸€ä¸ªä½¿ç”¨æ¯”è¾ƒå°‘ã€‚</p>
<h2 id="è„šæœ¬ç»“æ„"><a class="markdownIt-Anchor" href="#è„šæœ¬ç»“æ„"></a> è„šæœ¬ç»“æ„</h2>
<p>ä¸€ä¸ªæœåŠ¡è„šæœ¬ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š<code>[Unit]</code>ã€<code>[Service]</code>å’Œ<code>[Install]</code>ã€‚</p>
<ul>
<li><code>[Unit]</code>ï¼šä¸»è¦åŒ…å«æœåŠ¡çš„è¯´æ˜ã€‚</li>
<li><code>[Service]</code>ï¼šå®šä¹‰äº†æœåŠ¡çš„ä¸»è¦å†…å®¹ï¼ˆæ ¸å¿ƒï¼‰ã€‚</li>
<li><code>[Install]</code>ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs service">[Unit]<br>...<br><br>[Service]  <br>...<br><br>[Install]   <br>...<br></code></pre></div></td></tr></table></figure>
<h2 id="å‚æ•°å­—æ®µ"><a class="markdownIt-Anchor" href="#å‚æ•°å­—æ®µ"></a> å‚æ•°å­—æ®µ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></h2>
<h3 id="unit"><a class="markdownIt-Anchor" href="#unit"></a> [Unit]</h3>
<figure class="highlight plain"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs service">[Unit]<br>Description&#x3D;test	# å¯¹äºæœåŠ¡çš„è¯´æ˜æ–‡æœ¬<br>After&#x3D;network.target	# è¡¨ç¤ºæœåŠ¡éœ€è¦åœ¨å“ªäº›æœåŠ¡ä¹‹åå¯åŠ¨<br>Before&#x3D;xxx.service		# è¡¨ç¤ºæœåŠ¡éœ€è¦åœ¨å“ªäº›æœåŠ¡ä¹‹å‰å¯åŠ¨<br>Requires&#x3D;xxx.service	# è¡¨æ˜æœåŠ¡ä¹‹é—´çš„å¼ºä¾èµ–å…³ç³»<br>Wants&#x3D;xxx.service		# è¡¨ç¤ºæœåŠ¡ä¹‹é—´çš„å¼±ä¾èµ–å…³ç³»<br></code></pre></div></td></tr></table></figure>
<p><strong>Requires - å¼ºä¾èµ–</strong></p>
<p>åœ¨å½“å‰æœåŠ¡å¯åŠ¨çš„æ—¶å€™ï¼ŒRequiresåˆ—è¡¨ä¸‹çš„æœåŠ¡ä¹Ÿä¼šè¢«ä¸€èµ·å¯åŠ¨ï¼›å¦‚æœRequiresåˆ—è¡¨ä¸‹æŸä¸€ä¸ªæœåŠ¡è¢«åœæ­¢ï¼Œæˆ–è€…å¯åŠ¨å¤±è´¥äº†ï¼Œè¿™ä¸€ä¸ªæœåŠ¡ä¹Ÿä¼šè¢«åŒæ—¶åœæ­¢ã€‚æ‰€ä»¥Requiresä¼šäº§ç”Ÿå¾ˆå¼ºçš„ä¾èµ–å…³ç³»ã€‚</p>
<p>Requiresä¸èƒ½ä¿è¯æœåŠ¡ä¹‹é—´æ‰§è¡Œçš„é¡ºåºï¼Œå½“å‰æœåŠ¡å’ŒRequiresä¸­çš„æœåŠ¡å¯èƒ½åŒæ—¶è¢«æ¿€æ´»è¿è¡Œã€‚</p>
<blockquote>
<p>i.e. If a unit foo.service requires a unit bar.service as configured with Requires= and no ordering is configured with After= or Before=, then both units will be started simultaneously and without any delay between them if foo.service is activated.<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p>åœ¨foo.serviceä¸­å®šä¹‰äº†Requires=bar.serviceï¼Œè¡¨æ˜foo.serviceä¾èµ–äºbar.serviceï¼Œä½†æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™foo.serviceå’Œbar.serviceå®Œå…¨å¯èƒ½åŒæ—¶å¼€å§‹è¿è¡Œï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•å»¶è¿Ÿã€‚</p>
</blockquote>
<p>æ‰€ä»¥å¦‚æœfoo.serviceä¸­å®šä¹‰äº†Requires=bar.serviceï¼Œå¯åŠ¨çš„è¿‡ç¨‹åº”è¯¥å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ£€æŸ¥<code>bar.service</code>æ˜¯å¦å¯åŠ¨ã€‚</li>
<li>å¦‚æœ<code>bar.service</code>æ²¡æœ‰å¯åŠ¨ï¼Œåˆ™å¯åŠ¨bar.serviceã€‚</li>
<li>å¦‚æœ<code>bar.service</code>å·²ç»å¯åŠ¨ï¼ˆæˆ–ç»ç”±2å¯åŠ¨äº†ï¼‰ï¼Œåˆ™å¯ä»¥å¯åŠ¨<code>foo.service</code>ã€‚</li>
<li>å¦‚æœåœ¨<code>foo.service</code>è¿è¡Œè¿‡ç¨‹ä¸­<code>bar.service</code>ç»ˆæ­¢äº†ï¼Œåˆ™åŒæ—¶ç»ˆæ­¢<code>foo.service</code>ã€‚</li>
<li>åè¿‡æ¥<code>bar.service</code>ç»ˆæ­¢äº†ï¼Œå¯¹<code>foo.service</code>æ²¡æœ‰å½±å“ã€‚</li>
</ol>
<p><strong>Wants - å¼±ä¾èµ–</strong></p>
<p>Wantsçš„è¡Œä¸ºä»‹äºRequireså’ŒAfterä¹‹é—´ã€‚åœ¨ä¸€ä¸ªæœåŠ¡è¢«å¯åŠ¨çš„æ—¶å€™ï¼ŒWantsåˆ—è¡¨ä¸‹çš„æœåŠ¡ä¹Ÿä¼šè¢«å¯åŠ¨ï¼Œä½†å’ŒRequiresçš„åŒºåˆ«æ˜¯Wantsä¸‹çš„æœåŠ¡å³ä½¿å¯åŠ¨å¤±è´¥ã€æˆ–è€…è¿è¡Œä¸­å‡ºç°äº†é—®é¢˜ï¼Œä¹Ÿä¸ä¼šåè¿‡æ¥å½±å“å½“å‰æœåŠ¡çš„ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤è¢«ä½œä¸ºå¼±ä¾èµ–ã€‚</p>
<p><strong>Afterå’ŒBefore</strong></p>
<p>ä¸¤è€…å¯ä»¥ä¿è¯æœåŠ¡ä¹‹é—´å¯åŠ¨çš„é¡ºåºæ€§ï¼Œå®šä¹‰ä¹‹åå¯ä»¥ä¿è¯æœåŠ¡åœ¨æŸä¸€ä¸ªæœåŠ¡å¯åŠ¨ä¹‹å/ä¹‹å‰å¯åŠ¨ã€‚å’ŒRequiresä¸åŒçš„æ˜¯ï¼ŒAfterä¸ä¼šäº§ç”Ÿä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥è™½ç„¶åœ¨å¯åŠ¨çš„æ—¶å€™è¦æ±‚Afteråˆ—è¡¨ä¸­çš„æœåŠ¡å…ˆå¯åŠ¨ï¼Œä½†æ˜¯ä¹‹åå³ä½¿Afteråˆ—è¡¨ä¸­æŸä¸€ä¸ªæœåŠ¡åœæ­¢äº†ï¼Œå½“å‰æœåŠ¡ä¹Ÿä¾ç„¶ä¼šç»§ç»­è¿è¡Œã€‚</p>
<p>æ³¨æ„åœ¨æœåŠ¡ç»ˆæ­¢çš„æ—¶å€™ï¼Œä¼šä¾ç…§ç›¸åçš„é¡ºåºç»ˆæ­¢ã€‚</p>
<blockquote>
<p>i.e. if a unit is configured with After= on another unit, the former is stopped before the latter if both are shut down.</p>
<p>å¦‚æœfoo.serviceä¸­è®¾å®šäº†After=bar.serviceï¼Œåˆ™åœ¨ä¸¤ä¸ªä¸€èµ·è¢«ç»ˆæ­¢çš„æ—¶å€™ï¼Œfoo.serviceä¼šå…ˆäºbar.serviceç»ˆæ­¢ã€‚</p>
</blockquote>
<p>æ¯”é˜¿å¦å¤–å¦‚æœä¸¤ä¸ªæœåŠ¡å­˜åœ¨ç€Afteræˆ–Beforeä¸­ä»»æ„çš„å…³ç³»ï¼Œåœ¨ä¸€ä¸ªæœåŠ¡è¢«shutdownè€ŒåŒæ—¶å¦ä¸€ä¸ªæœåŠ¡åœ¨startçš„æ—¶å€™ï¼Œshutdownæ°¸è¿œå…ˆæ‰§è¡Œã€‚è€Œå½“æ²¡æœ‰Afteræˆ–Beforeçš„æ—¶å€™ï¼Œä¼šæ˜¯åŒæ—¶çš„ã€‚</p>
<p>åŒæ ·çš„åœ¨foo.serviceä¸­å®šä¹‰äº†After=bar.serviceï¼Œå½¢å¼åŒ–æè¿°è¿™ä¸€ä¸ªå¯åŠ¨è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>æ£€æŸ¥<code>foo.service</code>æ˜¯å¦å¯åŠ¨ã€‚</li>
<li>å¦‚æœ<code>foo.service</code>å¯åŠ¨äº†ï¼Œåˆ™å¯ä»¥å¯åŠ¨<code>bar.service</code>ã€‚</li>
<li>å¦‚æœ<code>foo.service</code>æ²¡æœ‰å¯åŠ¨ ï¼Œåˆ™ä¸€ç›´ç­‰å¾…ã€‚</li>
<li>å¦‚æœåœ¨<code>bar.service</code>æˆ–<code>foo.service</code>éƒ½å¯åŠ¨äº†ä¹‹åï¼ŒæŸä¸€æ–¹å‡ºç°é—®é¢˜ç»ˆæ­¢äº†ï¼Œåˆ™éƒ½ä¸ä¼šå½±å“å¦ä¸€æ–¹ã€‚</li>
</ol>
<h3 id="service"><a class="markdownIt-Anchor" href="#service"></a> [Service]</h3>
<figure class="highlight plain"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs service">[Service]<br>Type&#x3D;forking	# ä»£è¡¨äº†æœåŠ¡çš„è¿è¡Œæ¨¡å¼<br>User&#x3D;user		# ç”¨æˆ·<br>Group&#x3D;user		# ç”¨æˆ·ç»„<br>KillMode&#x3D;control-group	# æŒ‡å®šsystemdåœ¨åœæ­¢æœåŠ¡æ—¶è¯¥æ€ä¹ˆåš<br>PIDFile&#x3D;&#x2F;usr&#x2F;local&#x2F;test&#x2F;test.pid	# æä¾›pidæ–‡ä»¶çš„ç»å¯¹è·¯å¾„<br>Restart&#x3D;always		# é‡å¯è§„åˆ™<br>RestartSec&#x3D;10		# é‡å¯ä¹‹å‰ç­‰å¾…çš„ç§’æ•°<br>ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;test&#x2F;bin&#x2F;startup.sh	# æ‰§è¡Œå†…å®¹<br>PrivateTmp&#x3D;true		# åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´<br></code></pre></div></td></tr></table></figure>
<p><strong>Type - è¿è¡Œæ¨¡å¼</strong><sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p>
<p>è¿è¡Œæ¨¡å¼çš„å…³é”®è¯å’Œæ•ˆæœä¸»è¦æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>simple</td>
<td>é»˜è®¤å€¼ã€‚ä½¿ç”¨è¿™ä¸€ç±»å‹ä¼šä½¿å¾—systemdè®¤ä¸ºä½ çš„æœåŠ¡ä¸ä¼šforkï¼Œæ‰€ä»¥è®¤ä¸ºæœåŠ¡æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œå½“å‰è¿›ç¨‹çš„ç»“æŸå³ä»£è¡¨äº†æ•´ä¸ªæœåŠ¡ç¨‹åºç»“æŸè¿è¡Œï¼Œä¼šè¯†åˆ«ä¸ºé€€å‡ºçŠ¶æ€ã€‚æ‰€ä»¥è¿™ä¸€ç±»å‹é€‚åˆäºé‚£äº›åªæœ‰å•è¿›ç¨‹ï¼Œä¼šæŒç»­è¿è¡Œç›´è‡³ä¸»è¿›ç¨‹é€€å‡ºçš„ç¨‹åºã€‚<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></td>
</tr>
<tr>
<td>forking</td>
<td>ä¸€èˆ¬æœåŠ¡éƒ½æ˜¯ä½¿ç”¨è¿™ä¸€ä¸ªç±»å‹ã€‚è¿™ä¸€æ¨¡å¼ä¸‹systemdä¼šè®¤ä¸ºå½“å‰çš„æœåŠ¡ä¼šè¿›è¡Œforkï¼Œæ‰€ä»¥ä¸»è¿›ç¨‹çš„é€€å‡ºä¸ä¸€å®šå°±æ„å‘³ç€æ•´ä¸ªæœåŠ¡å·²ç»ç»“æŸï¼Œå› ä¸ºæœåŠ¡å¯èƒ½ä½œä¸ºå­è¿›ç¨‹åœ¨åå°æ­£å¸¸è¿è¡Œç€ã€‚ä½¿ç”¨è¿™ä¸€ç±»å‹åº”è¯¥åŒæ—¶æŒ‡å®š<code>PIDFile=</code>ï¼Œä»¥ä¾¿systemdèƒ½å¤Ÿè·Ÿè¸ªä¸»è¿›ç¨‹ã€‚</td>
</tr>
<tr>
<td>oneshot</td>
<td>é€‚ç”¨äºåªéœ€è¦æ‰§è¡Œä¸€æ¬¡çš„æœåŠ¡ã€éšåç«‹å³é€€å‡ºçš„æœåŠ¡ã€‚å¦å¤–ä¸ºäº†è®©systemdåœ¨æœåŠ¡é€€å‡ºä¹‹åä»ç„¶è®¤ä¸ºæœåŠ¡å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œéœ€è¦åŒæ—¶è®¾ç½®ï¼Œ<code>RemainAfterExit=yes</code>ã€‚</td>
</tr>
<tr>
<td>notify</td>
<td>å’Œsimpleç›¸åŒï¼Œé™¤äº†çº¦å®šåœ¨æœåŠ¡å°±ç»ªä¹‹åä¼šå‘systemdå‘é€ä¸€ä¸ªä¿¡å·ï¼Œé€šçŸ¥çš„å®ç°ç”± <a href="http://libsystemd-daemon.so" target="_blank" rel="noopener">libsystemd-daemon.so</a> æä¾›ã€‚</td>
</tr>
<tr>
<td>dbus</td>
<td>ä½¿ç”¨è¿™ä¸€æ–¹å¼å¯åŠ¨çš„æ—¶å€™ï¼Œsystemdé€šè¿‡æŒ‡å®šçš„<code>BusName</code>æ˜¯å¦å‡ºç°åœ¨äº†<code>DBus</code>æ€»çº¿ä¸Šæ¥åˆ¤æ–­æœåŠ¡æ˜¯å¦å°±ç»ªã€‚</td>
</tr>
</tbody>
</table>
<p><strong>Userå’ŒGroup - æ‰§è¡Œèº«ä»½</strong></p>
<p>æŒ‡å®šæœåŠ¡è¿è¡Œçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚</p>
<p><strong>KillMode - å¦‚ä½•åœæ­¢</strong></p>
<p>ï¼ˆå¾…è¡¥å……ï¼‰</p>
<p><strong>Restart - é‡å¯è§„åˆ™</strong></p>
<p>å†³å®šäº†æœåŠ¡ä»¥æ€æ ·çš„æ¨¡å¼é‡æ–°å¯åŠ¨ã€‚</p>
<table>
<thead>
<tr>
<th>Restart</th>
<th>æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>no</td>
<td>é»˜è®¤ã€‚ä¸ä¼šé‡å¯ã€‚</td>
</tr>
<tr>
<td>on-success</td>
<td>åªæœ‰åœ¨æœåŠ¡æ­£å¸¸é€€å‡ºï¼ˆreturn 0ï¼‰æ—¶æ‰é‡å¯ã€‚</td>
</tr>
<tr>
<td>on-failure</td>
<td>åœ¨ç¨‹åºä»¥ä»»ä½•éæ­£å¸¸çš„æ–¹å¼é€€å‡ºæ—¶é‡å¯ã€‚</td>
</tr>
<tr>
<td>on-abnormal</td>
<td>åªæœ‰åœ¨è¢«ä¿¡å·ç»ˆæ­¢æˆ–è¶…æ—¶æ—¶ï¼Œæ‰é‡å¯ã€‚</td>
</tr>
<tr>
<td>on-abort</td>
<td>åªæœ‰åœ¨æ”¶åˆ°æ²¡æœ‰è¢«æ•æ‰åˆ°çš„ä¿¡å·è€Œç»ˆæ­¢æ—¶ï¼Œæ‰é‡å¯ã€‚</td>
</tr>
<tr>
<td>on-watchdog</td>
<td>åªæœ‰åœ¨è¶…æ—¶é€€å‡ºæ—¶ï¼Œæ‰é‡å¯ã€‚</td>
</tr>
<tr>
<td>always</td>
<td>ä¸ç®¡ä»€ä¹ˆåŸå› ï¼Œé‡å¯å°±å¯¹äº†ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>å„ç§Exec*å­—æ®µ - æ‰§è¡Œç¨‹åº</strong></p>
<p>å®šä¹‰åœ¨æœåŠ¡çš„å„ä¸ªé˜¶æ®µåˆ†åˆ«æ‰§è¡Œä»€ä¹ˆæŒ‡ä»¤ï¼Œæœ‰ä»¥ä¸‹è¿™äº›ï¼š</p>
<table>
<thead>
<tr>
<th>Exec*</th>
<th>æ‰§è¡Œé˜¶æ®µ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ExecStart</td>
<td>å¯åŠ¨æœåŠ¡</td>
</tr>
<tr>
<td>ExecReload</td>
<td>é‡å¯æœåŠ¡</td>
</tr>
<tr>
<td>ExecStop</td>
<td>åœæ­¢æœåŠ¡</td>
</tr>
<tr>
<td>ExecStartPre</td>
<td>å¯åŠ¨æœåŠ¡å‰</td>
</tr>
<tr>
<td>ExecStartPost</td>
<td>å¯åŠ¨æœåŠ¡å</td>
</tr>
<tr>
<td>ExecStopPost</td>
<td>åœæ­¢æœåŠ¡å</td>
</tr>
</tbody>
</table>
<h3 id="install"><a class="markdownIt-Anchor" href="#install"></a> [Install]</h3>
<figure class="highlight plain"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs service">[Install]   <br>WantedBy&#x3D;multi-user.target<br></code></pre></div></td></tr></table></figure>
<p><strong>WantedBy</strong><sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></p>
<p>ç”¨äºè¡¨ç¤ºæœåŠ¡æ‰€å±çš„targetï¼Œä»è€Œé…ç½®å¼€æœºå¯åŠ¨ã€‚ä¸€èˆ¬å¸¸ç”¨çš„åªæœ‰<code>multi-user.target</code>å’Œ<code>graphical.target</code>ï¼ˆä¾èµ–äº<code>multi-user.target</code>ï¼‰ã€‚</p>
<h2 id="ç›¸å…³å‚è€ƒ"><a class="markdownIt-Anchor" href="#ç›¸å…³å‚è€ƒ"></a> ç›¸å…³å‚è€ƒ</h2>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>ä¸€ç¯‡ç³»ç»Ÿæ€§ä»‹ç»çš„æ–‡ç« ï¼š<a href="https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html" target="_blank" rel="noopener">Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p>å…³äº<code>After=</code>å’Œ<code>Requires=</code>åŒºåˆ«çš„è®¨è®ºï¼š<a href="https://serverfault.com/questions/812584/in-systemd-whats-the-difference-between-after-and-requires" target="_blank" rel="noopener">In systemd, whatâ€™s the difference between After= and Requires=? - Server Fault</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn3" class="footnote-item"><p>å•¥éƒ½æœ‰çš„Arch Wikiï¼š<a href="https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener">systemd (ç®€ä½“ä¸­æ–‡) - ArchWiki</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn4" class="footnote-item"><p>å…³äºsimpleå’Œforkingæ¨¡å¼çš„åŒºåˆ«ï¼š<a href="https://superuser.com/questions/1274901/systemd-forking-vs-simple/1274913" target="_blank" rel="noopener">redhat enterprise linux - systemd forking vs simple? - Super User</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn5" class="footnote-item"><p>ä¸€ç¯‡ä»‹ç»äº†äº›å‚æ•°çš„æ–‡ç« ï¼š<a href="https://www.cnblogs.com/wang-yc/p/8876155.html" target="_blank" rel="noopener">Centos7 è‡ªå®šä¹‰systemctlæœåŠ¡è„šæœ¬</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Linux/">Linux</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Linux/">Linux</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/09/03/Deep-Learning%E4%B8%AD%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%8A%A0%E8%BD%BD/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Deep Learningä¸­å¤§æ•°æ®é›†åŠ è½½çš„æŠ€å·§æ‘˜è¦</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/07/03/%E8%81%8A%E4%B8%80%E8%81%8ALinux%E5%8F%91%E8%A1%8C%E7%89%88%E7%9A%84%E9%97%AE%E9%A2%98/">
                        <span class="hidden-mobile">èŠä¸€èŠLinuxå‘è¡Œç‰ˆçš„é—®é¢˜</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://www.github.com/AcherStyx/" target="_blank" rel="nofollow noopener"><span>AcherStyx</span></a> <i class="iconfont icon-love"></i> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <span> & </span> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            
            <span id="busuanzi_value_site_pv"></span>
             ğŸ‘
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            
            <span id="busuanzi_value_site_uv"></span>
             ğŸ±
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  





  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8.8.3/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>







<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>



</body>
</html>
